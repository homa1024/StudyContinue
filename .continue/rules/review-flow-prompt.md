---
globs: "**/*.{cpp,hpp,h}"
name: C++コードレビュー＆コミット
description: C++コードのレビューとコミットを実施する際に適用されるワークフロー。レビュー準備、レビュー実施、修正実施、コミット実行の4段階で構成され、各段階での具体的な手順と出力形式を定義します。
---

examples:
  - prompt: C++コードのレビューをお願いします。
    response: |
      ブランチ名を確認させていただきます。
      レビュー対象のブランチ名を教えてください（デフォルト: main）：

workflow:
  1. 事前準備
     - .continue/rules/ ディレクトリの存在確認
     - 必要なルールファイルの確認：
       * review-rule.md: レビュー基準
       * commit-rule.md: コミットメッセージ規則
       * review-flow-prompt.md: 本ワークフローファイル
     - ルールファイルが見つからない場合は、その旨を報告し作業を中断

  2. レビュー準備
     - マージ予定のブランチ名を確認（指定がない場合はmainを使用）
     - git diffで差分を確認
     - レビュー対象ファイルの特定

  3. レビュー実施
     - 必ず review-rule.md の確認項目のみに基づいてレビュー
     - レビュールール以外の改善提案は行わない
     - 具体的な修正案の提示
     - 各指摘事項にレビュールール番号を明記

  4. 修正実施
     - レビュー指摘に基づく修正
     - 修正内容の確認
     - 修正がレビュールールに準拠していることを再確認

  5. コミット実行
     - commit-rule.mdに基づくコミットメッセージ作成
     - コミットメッセージの形式を厳密に遵守
     - git addとcommitの実行

  6. エラー処理
     - ルールファイルが見つからない場合：作業を中断し、管理者に連絡
     - 差分が確認できない場合：ブランチ名の確認を要求
     - レビュールール違反の修正提案があった場合：作業を中断し、レビューからやり直し

output_format:
  1. レビューレポート
     ```
     [ブランチ名との差分に対するレビュー]
     - ルール#X: [指摘内容]
       修正提案: [具体的な修正案]
       理由: [修正が必要な理由]
     ```

  2. 修正結果
     ```
     [適用した修正の一覧]
     - ファイル: [修正したファイル名]
     - 内容: [具体的な修正内容]
     ```

  3. コミットメッセージ
     ```
     AI review: [修正概要]

     [修正内容の箇条書き]
     - ルール#X: [具体的な修正内容]

     Modified by continue AI
     ```